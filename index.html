<!DOCTYPE html>
<html lang="sr">
  <head>
    <meta charset="UTF-8" />
    <title>–ß–∏–∫ –ü–æ–≥–æ–¥–∏</title>
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#538d4e" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <!-- Favicon for browser tabs -->
    <!-- Browser tab favicon -->
    <link
      rel="icon"
      type="image/png"
      href="https://bavariah.github.io/cik-pogodi/favicon-cik2.png"
      sizes="192x192"
    />

    <!-- Apple devices -->
    <link
      rel="apple-touch-icon"
      href="https://bavariah.github.io/cik-pogodi/favicon-cik2.png"
    />

    <!-- Social preview (Open Graph) -->
    <meta
      property="og:image"
      content="https://bavariah.github.io/cik-pogodi/favicon-cik2.png"
    />
    <meta property="og:image:width" content="192" />
    <meta property="og:image:height" content="192" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- 2) Initialize client, loader, and helper functions -->
    <script defer>
      // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
      // Supabase client & table names
      const client = supabase.createClient(
        "https://enhpbzexilgpphdmvfpo.supabase.co",
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuaHBiemV4aWxncHBoZG12ZnBvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5MjIyNjEsImV4cCI6MjA2MzQ5ODI2MX0.geTPR2XSHDEq3hxHZKUIw3HPB3FxDpFAsRGyCI_k_AE"
      );
      document.addEventListener("DOMContentLoaded", () => {
        /** Show / hide the sign-in button and sync on auth changes */
        client.auth.onAuthStateChange((event, session) => {
          const btn = document.getElementById("signInBtn");
          if (session?.user) {
            btn.style.display = "none";
            syncStats(session.user.id);
          } else {
            btn.style.display = "block";
          }
        });
      });

      document.addEventListener("DOMContentLoaded", () => {
        /** Prompt for email + send magic link */
        document.getElementById("signInBtn").onclick = async () => {
          const email = prompt("Enter your email for a magic link:");
          if (!email) return;
          const { error } = await client.auth.signInWithOtp({ email });
          if (error) console.error("Sign-in error:", error);
          else alert("‚úÖ Check your email for a magic link");
        };
      });
      /**
       * Read your localStorage stats and upsert into public.scores.
       * Relies on: user_id uuid column + RLS policy you already created.
       */
      async function syncStats(user_id, stats) {
        // calculate fields
        const totalPlays = stats.total;
        const totalWins = stats.wins;
        const totalAttempts = stats.attempts.reduce((sum, n) => sum + n, 0);
        const avg =
          totalPlays > 0 ? parseFloat((totalWins / totalPlays).toFixed(2)) : 0;

        const { error } = await client.from("scores").upsert(
          {
            user_id,
            username: localStorage.getItem("username") || null,
            score: totalWins,
            attempts: totalAttempts,
            avg_score: avg,
            distribution: stats.attempts, // jsonb column accepts JS array
          },
          { onConflict: "user_id" }
        );

        if (error) console.error("syncStats failed", error);
      }

      const WORDS_TABLE = "words";
      const SUBMISSIONS_TABLE = "submissions";

      // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
      // Globals for in-game logic
      let gameWords = []; // will hold the fetched list
      let targetWord = ""; // today‚Äôs answer
      let hintText = ""; // today‚Äôs hint

      // Time-based index logic (reuse your lockTime & START_TIME from script.js)
      //   const lockTime = 24 * 60 * 60 * 1000;
      //   const START_TIME = new Date("2025-05-19T21:05:00Z").getTime();

      // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
      // Fetch words, pick today‚Äôs entry, then start the game
      async function loadWords() {
        document.body.classList.add("loading");
        const { data, error } = await client
          .from(WORDS_TABLE)
          .select("word,hint");
        document.body.classList.remove("loading");

        if (error) {
          console.error("Error loading words:", error);
          return;
        }

        // normalize & store
        gameWords = data.map(({ word, hint }) => ({
          word: word.trim().toLowerCase(),
          hint: hint.trim(),
        }));

        // pick today‚Äôs word/hint into globals

        ({ word: targetWord, hint: hintText } = getTodayWord());
        // hand off to your master init function
        initGame();
      }

      // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
      // Compute ‚Äútoday‚Äù index
      function getTodayWord() {
        const elapsed = Date.now() - START_TIME;
        const timeWindow = Math.floor(elapsed / lockTime);
        const index = timeWindow % gameWords.length;
        return gameWords[index];
      }

      // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
      // Kick off loading as soon as DOM is ready
      document.addEventListener("DOMContentLoaded", loadWords);
    </script>
  </head>
  <body>
    <button
      id="hintIconBtn"
      style="
        position: absolute;
        top: 15px;
        left: 15px;
        font-size: 20px;
        background: none;
        border: none;
        cursor: pointer;
      "
    >
      ‚ùì
    </button>
    <button
      id="openLeaderboardBtn"
      title="Leaderboard"
      style="
        position: absolute;
        top: 15px;
        right: 39px;
        background: none;
        border: none;
        font-size: 22px;
        cursor: pointer;
      "
    >
      üèÜ
    </button>
    <button
      id="openStatsBtn"
      title="Statistika"
      style="
        position: absolute;
        top: 15px;
        right: 2px;
        background: none;
        border: none;
        font-size: 22px;
        cursor: pointer;
      "
    >
      üìä
    </button>
    <button
      id="signInBtn"
      style="
        position: absolute;
        top: 19px;
        right: 85px;
        display: block;
        background: none;
        outline: none;
        font-size: 18px;
        box-shadow: none;
        border: none;
      "
    >
      üîí
    </button>
    <h1 style="font-size: 28px">–ß–∏–∫ –ü–æ–≥–æ–¥–∏</h1>
    <div id="board"></div>
    <div id="keyboard"></div>
    <div id="hintWrapper" style="display: none; margin-top: 10px">
      <button id="showHintBtn">–ü—Ä–∏–∫–∞–∂–∏ –Ω–∞–≥–æ–≤–µ—à—Ç–∞—ò</button>
      <p id="hintText" style="display: none; margin-top: 10px"></p>
    </div>

    <div
      id="resultScreen"
      style="display: none; margin-top: 20px; text-align: center"
    >
      <h2 id="resultTitle"></h2>
      <div id="resultGrid"></div>
      <button id="shareImageBtn" style="margin-top: 15px">
        –ü–æ–¥–µ–ª–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç
      </button>
    </div>

    <div
      id="timer"
      style="margin-top: 20px; color: #ccc; margin-bottom: 30px"
    ></div>
    <div id="stats" style="display: none !important"></div>

    <div
      id="statsModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: #222;
          padding: 20px;
          border-radius: 8px;
          width: 300px;
          max-width: 90%;
          position: relative;
        "
      >
        <button
          id="closeStatsBtn"
          style="
            position: absolute;
            top: 5px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
          "
        >
          ‚úñÔ∏è
        </button>
        <h3 style="margin-bottom: 15px">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
        <div id="statsContent"></div>
      </div>
    </div>

    <!-- Hint Modal -->
    <div
      id="hintModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      "
    >
      <div
        style="
          background: #222;
          padding: 25px;
          border-radius: 10px;
          max-width: 300px;
          text-align: center;
          position: relative;
          min-width: 290px;
          min-height: 60px;
        "
      >
        <button
          id="closeHintBtn"
          style="
            position: absolute;
            top: 8px;
            right: 10px;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #fff;
          "
        >
          ‚úñ
        </button>
        <p id="hintModalText" style="margin: 0">Hint text here</p>
      </div>
    </div>
    <!--leaderboard  -->

    <div
      id="leaderboardModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        font-family: sans-serif;
      "
    >
      <div
        style="
          background: #222;
          padding: 20px 20px 30px 20px;
          border-radius: 12px;
          width: 100%;
          max-width: 500px;
          color: #fff;
          text-align: center;
          position: relative;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        "
      >
        <button
          id="closeLeaderboardBtn"
          style="
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
          "
        >
          ‚úñ
        </button>

        <h2 style="margin-bottom: 15px">üèÜ –¢–∞–±–µ–ª–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞</h2>

        <div style="margin-bottom: 15px">
          <button
            onclick="loadLeaderboard('avg_score')"
            style="
              padding: 6px 12px;
              border: none;
              background: #444;
              color: #fff;
              border-radius: 4px;
              cursor: pointer;
            "
          >
            –ù–∞—ò–±–æ—ô–∏ –ø—Ä–æ—Å–µ–∫
          </button>
          <button
            onclick="loadLeaderboard('score')"
            style="
              margin-right: 5px;
              padding: 6px 12px;
              border: none;
              background: #444;
              color: #fff;
              border-radius: 4px;
              cursor: pointer;
            "
          >
            –ù–∞—ò–≤–∏—à–µ –ø–æ–µ–Ω–∞
          </button>
        </div>

        <div
          id="leaderboardContent"
          style="
            text-align: left;
            max-height: 350px;
            overflow-y: auto;
            padding: 20px 15px;
          "
        ></div>
      </div>
    </div>

    <button
      id="helpBtn"
      title="–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä–µ"
      style="
        position: absolute;
        top: 15px;
        left: 60px;
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
      "
    >
      ‚ÑπÔ∏è
    </button>

    <!-- Help Modal -->
    <div
      id="helpModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        font-family: sans-serif;
      "
    >
      <div
        style="
          background: #222;
          padding: 20px;
          border-radius: 12px;
          width: 90%;
          max-width: 500px;
          max-height: 90vh;
          overflow-y: auto;
          color: #fff;
          position: relative;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        "
      >
        <button
          id="closeHelpBtn"
          style="
            position: absolute;
            top: 20px;
            right: 10px;
            background: none;
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
          "
        >
          ‚úñ
        </button>

        <h2 style="margin-bottom: 15px; text-align: center">–ö–∞–∫–æ –∏–≥—Ä–∞—Ç–∏</h2>

        <div style="margin-bottom: 20px">
          <p>–ü–æ–≥–æ–¥–∏—Ç–µ —Ä–µ—á –æ–¥ 6 —Å–ª–æ–≤–∞ —É 7 –ø–æ–∫—É—à–∞—ò–∞.</p>
          <p>
            –ù–∞–∫–æ–Ω —Å–≤–∞–∫–æ–≥ –ø–æ–∫—É—à–∞—ò–∞, –±–æ—ò–∞ –ø–ª–æ—á–∏—Ü–∞ —õ–µ —Å–µ –ø—Ä–æ–º–µ–Ω–∏—Ç–∏ –¥–∞ –ø–æ–∫–∞–∂–µ –∫–æ–ª–∏–∫–æ
            —Å—Ç–µ –±–ª–∏–∑—É —Ä–µ—à–µ—ö–∞:
          </p>

          <div
            style="
              margin: 15px 0;
              display: flex;
              align-items: center;
              gap: 10px;
            "
          >
            <div
              style="
                width: 40px;
                height: 40px;
                background: #538d4e;
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: bold;
              "
            >
              –ê
            </div>
            <span>–°–ª–æ–≤–æ —ò–µ –Ω–∞ –ø—Ä–∞–≤–æ–º –º–µ—Å—Ç—É</span>
          </div>

          <div
            style="
              margin: 15px 0;
              display: flex;
              align-items: center;
              gap: 10px;
            "
          >
            <div
              style="
                width: 40px;
                height: 40px;
                background: #b59f3b;
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: bold;
              "
            >
              –ë
            </div>
            <span>–°–ª–æ–≤–æ —ò–µ —É —Ä–µ—á–∏, –∞–ª–∏ –Ω–∞ –ø–æ–≥—Ä–µ—à–Ω–æ–º –º–µ—Å—Ç—É</span>
          </div>

          <div
            style="
              margin: 15px 0;
              display: flex;
              align-items: center;
              gap: 10px;
            "
          >
            <div
              style="
                width: 40px;
                height: 40px;
                background: #3a3a3c;
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: bold;
              "
            >
              –í
            </div>
            <span>–°–ª–æ–≤–æ –Ω–∏—ò–µ —É —Ä–µ—á–∏</span>
          </div>
        </div>

        <div style="margin-bottom: 20px">
          <h3>–ù–∞–≥–æ–≤–µ—à—Ç–∞—ò</h3>
          <p>
            –ê–∫–æ –Ω–µ —É—Å–ø–µ—Ç–µ –¥–∞ –ø–æ–≥–æ–¥–∏—Ç–µ —Ä–µ—á —É –ø—Ä–≤–∏—Ö 6 –ø–æ–∫—É—à–∞—ò–∞, –¥–æ–±–∏—õ–µ—Ç–µ –º–æ–≥—É—õ–Ω–æ—Å—Ç
            –¥–∞ –≤–∏–¥–∏—Ç–µ –Ω–∞–≥–æ–≤–µ—à—Ç–∞—ò –ø—Ä–µ –ø–æ—Å–ª–µ–¥—ö–µ–≥ –ø–æ–∫—É—à–∞—ò–∞.
          </p>
          <p>
            –ù–∞–≥–æ–≤–µ—à—Ç–∞—ò —õ–µ —Å–µ –ø–æ—ò–∞–≤–∏—Ç–∏ –∫–∞–æ –∑–Ω–∞–∫ –ø–∏—Ç–∞—ö–∞ (‚ùì) —É –≥–æ—Ä—ö–µ–º –ª–µ–≤–æ–º —É–≥–ª—É.
          </p>
        </div>

        <div style="margin-bottom: 20px">
          <h3>–ë–æ–¥–æ–≤–∞—ö–µ</h3>
          <p>–ë–æ–¥–æ–≤–∏ —Å–µ –¥–æ–¥–µ—ô—É—ò—É –Ω–∞ –æ—Å–Ω–æ–≤—É —Ç–æ–≥–∞ —É –∫–æ–º —Ä–µ–¥—É —Å—Ç–µ –ø–æ–≥–æ–¥–∏–ª–∏ —Ä–µ—á:</p>
          <ul style="list-style-type: none; padding-left: 0">
            <li>1. —Ä–µ–¥: 50 –ø–æ–µ–Ω–∞</li>
            <li>2. —Ä–µ–¥: 25 –ø–æ–µ–Ω–∞</li>
            <li>3. —Ä–µ–¥: 10 –ø–æ–µ–Ω–∞</li>
            <li>4. —Ä–µ–¥: 8 –ø–æ–µ–Ω–∞</li>
            <li>5. —Ä–µ–¥: 5 –ø–æ–µ–Ω–∞</li>
            <li>6. —Ä–µ–¥: 2 –ø–æ–µ–Ω–∞</li>
            <li>7. —Ä–µ–¥: 1 –ø–æ–µ–Ω</li>
          </ul>
        </div>

        <div>
          <h3>–ù–æ–≤–∞ —Ä–µ—á</h3>
          <p>–ù–æ–≤–∞ —Ä–µ—á —ò–µ –¥–æ—Å—Ç—É–ø–Ω–∞ —Å–≤–∞–∫–∏—Ö 24 —Å–∞—Ç–∞.</p>
          <p>–í–∞—à —Ä–µ–∑—É–ª—Ç–∞—Ç —Å–µ —á—É–≤–∞ –∏ –º–æ–∂–µ—Ç–µ –≥–∞ –ø–æ–¥–µ–ª–∏—Ç–∏ —Å–∞ –ø—Ä–∏—ò–∞—Ç–µ—ô–∏–º–∞!</p>
        </div>
      </div>
    </div>

    <script>
      function showResultGrid(win) {
        const boardRows = document.querySelectorAll(".row");
        const resultGrid = document.getElementById("resultGrid");
        const resultTitle = document.getElementById("resultTitle");
        const resultScreen = document.getElementById("resultScreen");

        resultGrid.innerHTML = "";

        if (win) {
          let message = "–ë—Ä–∞–≤–æ! –ü–æ–≥–æ–¥–∏–ª–∏ —Å—Ç–µ —Ä–µ—á!";
          if (currentRow === 0) message = "üåü –ù–µ–≤–µ—Ä–æ–≤–∞—Ç–Ω–æ! –ü–æ–≥–æ–¥–∞–∫ –∏–∑ –ø—Ä–≤–µ!";
          else if (currentRow === 1)
            message = "üî• –°—ò–∞—ò–Ω–æ! –ü–æ–≥–æ–¥–∏–ª–∏ —Å—Ç–µ –∏–∑ –¥—Ä—É–≥–æ–≥ –ø–æ–∫—É—à–∞—ò–∞!";
          else if (currentRow === 2)
            message = "üí™ –û–¥–ª–∏—á–Ω–æ! –¢—Ä–µ—õ–∏ –ø–æ–∫—É—à–∞—ò –∏ —É—Å–ø–µ—Ö!";
          else if (currentRow === 3)
            message = "üëè –ù–∏—ò–µ –±–∏–ª–æ –ª–∞–∫–æ, –∞–ª–∏ —É—Å–ø–µ–ª–∏ —Å—Ç–µ —É —á–µ—Ç–≤—Ä—Ç–æ–º –ø–æ–∫—É—à–∞—ò—É!";
          resultTitle.innerHTML = message;
        } else {
          resultTitle.innerHTML = `–ù–∏—Å—Ç–µ –ø–æ–≥–æ–¥–∏–ª–∏ üòû<br><small style="color:#ccc;">–¢–∞—á–Ω–∞ —Ä–µ—á —ò–µ: <strong>${targetWord.toUpperCase()}</strong></small>`;
        }

        for (let r = 0; r < 7; r++) {
          const row = boardRows[r];
          const rowClone = row.cloneNode(true);
          rowClone.style.marginBottom = "5px";

          [...rowClone.children].forEach((tile) => {
            tile.textContent = "";
          });

          resultGrid.appendChild(rowClone);
        }

        resultScreen.style.display = "block";
        resultScreen.scrollIntoView({ behavior: "smooth" });

        // ‚úÖ Setup share button only now
        const shareBtn = document.getElementById("shareImageBtn");
        if (shareBtn) {
          shareBtn.onclick = () => {
            const emojiMap = { green: "üü©", orange: "üüß", grey: "‚¨õ" };
            const savedGrid = JSON.parse(
              localStorage.getItem("last_result_grid") || "[]"
            );

            const shareText =
              savedGrid
                .map((row) =>
                  row.map((tile) => emojiMap[tile.color] || "‚¨õ").join("")
                )
                .join("\n") +
              "\n–ü–æ–≥–ª–µ–¥–∞—ò –∏–≥—Ä—É: https://bavariah.github.io/cik-pogodi/";

            if (navigator.share) {
              navigator
                .share({
                  title: "–ß–∏–∫ –ü–æ–≥–æ–¥–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç",
                  text: shareText,
                })
                .catch(() => {
                  fallbackShare(shareText);
                });
            } else {
              fallbackShare(shareText);
            }
          };
        }

        function fallbackShare(text) {
          navigator.clipboard.writeText(text).then(() => {
            alert(
              "–†–µ–∑—É–ª—Ç–∞—Ç –∫–æ–ø–∏—Ä–∞–Ω! –û—Ç–≤–æ—Ä–∏—Ç–µ Viber, WhatsApp –∏–ª–∏ –¥—Ä—É–≥—É –∞–ø–ª–∏–∫–∞—Ü–∏—ò—É –∏ –Ω–∞–ª–µ–ø–∏—Ç–µ."
            );
          });
        }
      }
    </script>

    <script src="script.js" defer></script>

    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/sw.js")
          .then(() => console.log("Service Worker registered"))
          .catch((err) => console.error("SW registration failed:", err));
      }
    </script>
  </body>
</html>
